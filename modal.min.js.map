{"version":3,"sources":["modal.min.js"],"names":["_typeof","Symbol","iterator","obj","constructor","definition","moduleName","root","self","global","exports","module","require","$","factory","param","$self","rootElement","opt","isUndefined","jQuery","map","key","val","Module","moduleRoot","_this","this","target","extension","$root","defaultRootElement","width","height","padding","type","startopen","clone","btn","on","e","preventDefault","init","isPng","str","getExtension","isGif","isJpg","isDiv","indexOf","fileName","ret","fileTypes","split","len","length","prototype","console","log","setTarget","setType","drawModalElement","calcSize","open","attr","link","setYoutubeId","getYoutubeId","regExp","match","drawOverlay","drawModal","drawModalBody","drawModalContent","drawModalBtn","setModalElements","setModalCloseElements","append","$overlay","$modal","$modalBody","contentStr","btnStr","$modalElements","$modalCloseElements","func","_this2","img","Image","src","onload","setSize","apply","css","find","_this3","addClass","fadeIn","setCloseEvent","close","_this4","fadeOut","remove","removeClass","_this5"],"mappings":"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","file":"modal.min.js","sourcesContent":["\"use strict\";\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\n(function (definition) {\n    \"use strict\";\n\n    var moduleName = \"uiModal\";\n\n    var root = (typeof self === \"undefined\" ? \"undefined\" : _typeof(self)) === \"object\" && self.self === self && self || (typeof global === \"undefined\" ? \"undefined\" : _typeof(global)) === \"object\" && global.global === global && global;\n\n    if ((typeof exports === \"undefined\" ? \"undefined\" : _typeof(exports)) === \"object\") {\n        module.exports = definition(root, require(\"jquery\"));\n    } else {\n        root[moduleName] = definition(root, $);\n    }\n})(function (root, $) {\n    \"use strict\";\n\n    // -------------------------------------------------------\n    // utility functions\n    // -------------------------------------------------------\n\n    var trimDot = function trimDot(s) {\n        return s.replace(\".\", \"\");\n    };\n\n    var isUndefined = function isUndefined(obj) {\n        return obj === void 0;\n    };\n\n    var isPng = function isPng(str) {\n        return getExtension(str) === \"png\";\n    };\n    var isGif = function isGif(str) {\n        return getExtension(str) === \"gif\";\n    };\n    var isJpg = function isJpg(str) {\n        return getExtension(str) === \"jpg\";\n    };\n    var isDiv = function isDiv(str) {\n        return str.indexOf(\"#\") === 0;\n    };\n    var isYoutube = function isYoutube(str) {\n        return str.indexOf(\"youtube.com\") !== -1;\n    };\n\n    var getExtension = function getExtension(fileName) {\n        var ret;\n        if (!fileName) return false;\n\n        var fileTypes = fileName.split(\".\");\n        var len = fileTypes.length;\n        if (len === 0) return false;\n\n        ret = fileTypes[len - 1];\n        return ret;\n    };\n\n    // -------------------------------------------------------\n    // module\n    // -------------------------------------------------------\n\n    /**\n     * module factory\n     * this module is dependent on jQuery\n     * @prop {string} rootElement default root element class or id\n     * @prop {array} instance\n     * @namespace\n     */\n    function factory(param) {\n        var rootElement = \".js-onModal\";\n        var opt = !isUndefined(param) ? param : {};\n\n        var $self;\n        if (isUndefined(opt.root)) $self = $(rootElement);\n        if (!isUndefined(opt.root)) $self = opt.root instanceof jQuery ? param.root : $(param.root);\n\n        return $self.map(function (key, val) {\n            new Module(opt, val);\n        });\n    }\n\n    /**\n     * constructor\n     * @type {Function}\n     */\n    function Module(param, moduleRoot) {\n        var _this = this;\n\n        this.target = null;\n        this.extension = null;\n        this.$root = $(moduleRoot);\n\n        this.opt = {\n            root: this.defaultRootElement,\n            width: isUndefined(param.width) ? 800 : param.width,\n            height: isUndefined(param.height) ? 600 : param.height,\n            padding: isUndefined(param.padding) ? 40 : param.padding,\n\n            type: isUndefined(param.type) ? \"img\" : param.type,\n\n            startopen: isUndefined(param.startopen) ? false : param.startopen,\n\n            clone: isUndefined(param.clone) ? false : param.clone,\n            btn: isUndefined(param.btn) ? true : param.btn\n        };\n\n        this.$root.on(\"click\", function (e) {\n            e.preventDefault();\n\n            _this.init();\n            return false;\n        });\n\n        if (this.opt.startopen) this.init();\n    }\n\n    Module.prototype.init = function () {\n        console.log('init');\n        this.setTarget();\n        this.setType();\n        this.drawModalElement();\n        this.calcSize(this.open);\n        return this;\n    };\n\n    Module.prototype.setTarget = function () {\n\n        this.target = this.$root.attr(\"href\");\n\n        return this;\n    };\n\n    Module.prototype.setType = function (link) {\n\n        if (this.target.indexOf(\"youtube.com\") !== -1) {\n            this.type = \"youtube\";\n            this.setYoutubeId();\n        }\n        if (isPng(this.target) || isGif(this.target) || isJpg(this.target)) {\n            this.type = \"img\";\n        }\n        if (isDiv(this.target)) {\n            this.type = \"div\";\n        }\n        if (this.opt.type === \"iframe\") {\n            this.type = \"iframe\";\n        }\n        return this;\n    };\n\n    Module.prototype.setYoutubeId = function () {\n        this.target = this.getYoutubeId();\n    };\n    Module.prototype.getYoutubeId = function () {\n        var regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=)([^#\\&\\?]*).*/;\n        var match = this.target.match(regExp);\n        if (match && match[2].length == 11) {\n            return match[2];\n        } else {\n            //error\n        }\n    };\n\n    Module.prototype.drawModalElement = function () {\n        this.drawOverlay();\n        this.drawModal();\n        this.drawModalBody();\n        this.drawModalContent();\n\n        if (this.opt.btn) {\n            this.drawModalBtn();\n        }\n\n        this.setModalElements();\n        this.setModalCloseElements();\n        return this;\n    };\n\n    Module.prototype.drawOverlay = function () {\n\n        $(\"body\").append(\"<div id='js-modalOverlay' class='ui-modal__overlay'>\");\n        this.$overlay = $(\"#js-modal-overlay\");\n\n        return this;\n    };\n\n    Module.prototype.drawModal = function () {\n\n        $(\"body\").append(\"<div id='js-modal' class='ui-modal'>\");\n        this.$modal = $(\"#js-modal\");\n\n        return this;\n    };\n\n    Module.prototype.drawModalBody = function () {\n\n        this.$modal.append(\"<div id='js-modalBody' class='ui-modal__body'>\");\n        this.$modalBody = $(\"#js-modalBody\");\n\n        return this;\n    };\n\n    Module.prototype.drawModalContent = function () {\n\n        var contentStr = \"<img src='\" + this.target + \"' >\";\n\n        if (this.type === \"youtube\") {\n            contentStr = \"<iframe src='https://www.youtube.com/embed/\" + this.target + \"?enablejsapi=1&amp;rel=0&amp;controls=0&amp;showinfo=0' width='' height='' frameborder='0' allowfullscreen></iframe>\";\n        }\n        if (this.type === \"iframe\") {\n            contentStr = \"<iframe src='\" + this.target + \"' width='' height='' frameborder='0' allowfullscreen></iframe>\";\n        }\n\n        if (this.type === \"div\") {\n            if (this.opt.clone) {\n                contentStr = $(this.target).clone(true, true);\n            } else {\n                contentStr = $(this.target);\n            }\n        }\n\n        this.$modalBody.append(contentStr);\n\n        return this;\n    };\n\n    Module.prototype.drawModalBtn = function () {\n        var btnStr = \"<a id='js-modalClose' class='ui-modal__close' href='#'>close</a>\";\n        this.$modalBody.append(btnStr);\n        return this;\n    };\n\n    Module.prototype.setModalElements = function () {\n        this.$modalElements = $(\"#js-modalOverlay, #js-modal\");\n        return this;\n    };\n\n    Module.prototype.setModalCloseElements = function () {\n        this.$modalCloseElements = $(\"#js-modalOverlay, #js-modalClose\");\n        return this;\n    };\n\n    Module.prototype.calcSize = function (func) {\n        var _this2 = this;\n\n        if (this.type === \"img\") {\n\n            var img = new Image();\n            img.src = this.target;\n\n            img.onload = function () {\n                _this2.setSize(img.width, img.height);\n\n                // callback function\n                if (typeof func !== \"function\") return false;\n                func.apply(_this2);\n            };\n        } else {\n\n            this.setSize(this.opt.width, this.opt.height);\n\n            // callback function\n            if (typeof func !== \"function\") return false;\n            func.apply(this);\n        }\n    };\n\n    Module.prototype.setSize = function (width, height) {\n        this.$modal.css({\n            width: width,\n            height: height\n        });\n\n        if (this.type === \"youtube\" || this.type === \"iframe\") {\n            this.$modalBody.find('iframe').css({\n                width: width,\n                height: height\n            });\n        }\n\n        return this;\n    };\n\n    /**\n    * open body panel\n    * @returns {boolean}\n    */\n    Module.prototype.open = function () {\n        var _this3 = this;\n\n        $(\"body\").addClass(\"js-noScroll\");\n\n        this.$modalElements.fadeIn(function () {\n            _this3.setCloseEvent();\n        });\n\n        return this;\n    };\n\n    Module.prototype.close = function () {\n        var _this4 = this;\n\n        this.$modalElements.fadeOut(function () {\n\n            if (_this4.type === \"div\" && !_this4.opt.clone) {\n                $(\"body\").append($(_this4.target));\n            }\n\n            _this4.$modalElements.remove();\n            $(\"body\").removeClass(\"js-noScroll\");\n        });\n\n        return this;\n    };\n\n    Module.prototype.setCloseEvent = function () {\n        var _this5 = this;\n\n        this.$modalCloseElements.on(\"click\", function () {\n            _this5.close();\n        });\n    };\n\n    return factory;\n});"],"sourceRoot":"/source/"}